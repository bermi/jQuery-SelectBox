/*
 *  jQuery selectBox (version 1.0.7)
 *
 *  Copyright 2011 Cory LaViska for A Beautiful Site, LLC.
 *
 *  http://abeautifulsite.net/blog/2011/01/jquery-selectbox-plugin/
 *
 */
 jQuery&&function(c){c.extend(c.fn,{selectBox:function(r,f){var s,j="",v=function(a,d){if(navigator.userAgent.match(/iPad|iPhone|Android/i))return!1;if(a.tagName.toLowerCase()!=="select")return!1;a=c(a);if(a.data("selectBox-control"))return!1;var b=c('<a class="selectBox" />'),e=a.attr("multiple")||parseInt(a.attr("size"))>1,m=d||{};if(m.autoWidth===void 0)m.autoWidth=!0;b.addClass(a.attr("class")).attr("style",a.attr("style")||"").attr("title",a.attr("title")||"").attr("tabindex",parseInt(a.attr("tabindex"))).css("display",
 "inline-block").bind("focus.selectBox",function(){this!==document.activeElement&&c(document.activeElement).blur();b.hasClass("selectBox-active")||(b.addClass("selectBox-active"),a.trigger("focus"))}).bind("blur.selectBox",function(){b.hasClass("selectBox-active")&&(b.removeClass("selectBox-active"),a.trigger("blur"))});a.attr("disabled")&&b.addClass("selectBox-disabled");if(e){var g=n(a,"inline");b.append(g).data("selectBox-options",g).addClass("selectBox-inline").addClass("selectBox-menuShowing").bind("keydown.selectBox",
 function(b){t(a,b)}).bind("keypress.selectBox",function(b){u(a,b)}).bind("mousedown.selectBox",function(a){c(a.target).is("A.selectBox-inline")&&a.preventDefault();b.hasClass("selectBox-focus")||b.focus()}).insertAfter(a);if(!a[0].style.height){var e=a.attr("size")?parseInt(a.attr("size")):5,f=b.clone().removeAttr("id").css({position:"absolute",top:"-9999em"}).show().appendTo("body");f.find(".selectBox-options").html("<li><a>\u00a0</a></li>");optionHeight=parseInt(f.find(".selectBox-options A:first").html("&nbsp;").outerHeight());
 f.remove();b.height(optionHeight*e)}}else e=c('<span class="selectBox-label" />'),f=c('<span class="selectBox-arrow" />'),e.text(c(a).find("OPTION:selected").text()||"\u00a0"),g=n(a,"dropdown"),g.appendTo("BODY"),b.data("selectBox-options",g).addClass("selectBox-dropdown").append(e).append(f).bind("mousedown.selectBox",function(c){b.hasClass("selectBox-menuShowing")?h():(c.stopPropagation(),g.data("selectBox-down-at-x",c.screenX).data("selectBox-down-at-y",c.screenY),k(a))}).bind("keydown.selectBox",
 function(b){t(a,b)}).bind("keypress.selectBox",function(b){u(a,b)}).insertAfter(a);o(b);a.addClass("selectBox").data("selectBox-control",b).data("selectBox-settings",m).hide()},n=function(a,d){var b;switch(d){case "inline":return b=c('<ul class="selectBox-options" />'),a.find("OPTGROUP").length?a.find("OPTGROUP").each(function(){var a=c('<li class="selectBox-optgroup" />');a.text(c(this).attr("label"));b.append(a);c(this).find("OPTION").each(function(){var a=c("<li />"),d=c("<a />");a.addClass(c(this).attr("class"));
 d.attr("rel",c(this).val()).text(c(this).text());a.append(d);c(this).attr("disabled")&&a.addClass("selectBox-disabled");c(this).attr("selected")&&a.addClass("selectBox-selected");b.append(a)})}):a.find("OPTION").each(function(){var a=c("<li />"),d=c("<a />");a.addClass(c(this).attr("class"));d.attr("rel",c(this).val()).text(c(this).text());a.append(d);c(this).attr("disabled")&&a.addClass("selectBox-disabled");c(this).attr("selected")&&a.addClass("selectBox-selected");b.append(a)}),b.find("A").bind("mouseover.selectBox",
 function(){i(a,c(this).parent())}).bind("mouseout.selectBox",function(){p(a,c(this).parent())}).bind("mousedown.selectBox",function(b){b.preventDefault();a.selectBox("control").hasClass("selectBox-active")||a.selectBox("control").focus()}).bind("mouseup.selectBox",function(b){h();q(a,c(this).parent(),b)}),o(b),b;case "dropdown":return b=c('<ul class="selectBox-dropdown-menu selectBox-options" />'),a.find("OPTGROUP").length?a.find("OPTGROUP").each(function(){var a=c('<li class="selectBox-optgroup" />');
 a.text(c(this).attr("label"));b.append(a);c(this).find("OPTION").each(function(){var a=c("<li />"),d=c("<a />");a.addClass(c(this).attr("class"));d.attr("rel",c(this).val()).text(c(this).text());a.append(d);c(this).attr("disabled")&&a.addClass("selectBox-disabled");c(this).attr("selected")&&a.addClass("selectBox-selected");b.append(a)})}):a.find("OPTION").length>0?a.find("OPTION").each(function(){var a=c("<li />"),d=c("<a />");a.addClass(c(this).attr("class"));d.attr("rel",c(this).val()).text(c(this).text());
 a.append(d);c(this).attr("disabled")&&a.addClass("selectBox-disabled");c(this).attr("selected")&&a.addClass("selectBox-selected");b.append(a)}):b.append("<li>\u00a0</li>"),b.data("selectBox-select",a).css("display","none").appendTo("BODY").find("A").bind("mousedown.selectBox",function(a){a.preventDefault();a.screenX===b.data("selectBox-down-at-x")&&a.screenY===b.data("selectBox-down-at-y")&&(b.removeData("selectBox-down-at-x").removeData("selectBox-down-at-y"),h())}).bind("mouseup.selectBox",function(d){d.screenX===
 b.data("selectBox-down-at-x")&&d.screenY===b.data("selectBox-down-at-y")||(b.removeData("selectBox-down-at-x").removeData("selectBox-down-at-y"),h(),q(a,c(this).parent()))}).bind("mouseover.selectBox",function(){i(a,c(this).parent())}).bind("mouseout.selectBox",function(){p(a,c(this).parent())}),o(b),b}},k=function(a){var a=c(a),d=a.data("selectBox-control"),b=a.data("selectBox-settings"),e=d.data("selectBox-options");if(d.hasClass("selectBox-disabled"))return!1;h();b.autoWidth&&e.css("width",d.outerWidth()-
 (parseInt(d.css("borderLeftWidth"))+parseInt(d.css("borderLeftWidth"))));e.css({top:d.offset().top+d.outerHeight()-parseInt(d.css("borderBottomWidth")),left:d.offset().left});switch(b.menuTransition){case "fade":e.fadeIn(b.menuSpeed);break;case "slide":e.slideDown(b.menuSpeed);break;default:e.show(b.menuSpeed)}b=e.find(".selectBox-selected:first");l(a,b,!0);i(a,b);d.addClass("selectBox-menuShowing");c(document).bind("mousedown.selectBox",function(a){c(a.target).parents().andSelf().hasClass("selectBox-options")||
 h()})},h=function(){c(".selectBox-dropdown-menu").length!==0&&(c(document).unbind("mousedown.selectBox"),c(".selectBox-dropdown-menu").each(function(){var a=c(this),d=a.data("selectBox-select"),b=d.data("selectBox-control"),d=d.data("selectBox-settings");switch(d.menuTransition){case "fade":a.fadeOut(d.menuSpeed);break;case "slide":a.slideUp(d.menuSpeed);break;default:a.hide(d.menuSpeed)}b.removeClass("selectBox-menuShowing")}))},q=function(a,d,b){var a=c(a),d=c(d),e=a.data("selectBox-control");a.data("selectBox-settings");
 if(e.hasClass("selectBox-disabled"))return!1;if(d.length===0||d.hasClass("selectBox-disabled"))return!1;a.attr("multiple")?b.shiftKey&&e.data("selectBox-last-selected")?(d.toggleClass("selectBox-selected"),b=d.index()>e.data("selectBox-last-selected").index()?d.siblings().slice(e.data("selectBox-last-selected").index(),d.index()):d.siblings().slice(d.index(),e.data("selectBox-last-selected").index()),b=b.not(".selectBox-optgroup, .selectBox-disabled"),d.hasClass("selectBox-selected")?b.addClass("selectBox-selected"):
 b.removeClass("selectBox-selected")):b.metaKey?d.toggleClass("selectBox-selected"):(d.siblings().removeClass("selectBox-selected"),d.addClass("selectBox-selected")):(d.siblings().removeClass("selectBox-selected"),d.addClass("selectBox-selected"));e.hasClass("selectBox-dropdown")&&e.find(".selectBox-label").text(d.text());var f=0,g=[];a.attr("multiple")?e.find(".selectBox-selected A").each(function(){g[f++]=c(this).attr("rel")}):g=d.find("A").attr("rel");e.data("selectBox-last-selected",d);a.val()!==
 g&&(a.val(g),a.trigger("change"));return!0},i=function(a,d){a=c(a);d=c(d);a.data("selectBox-control").data("selectBox-options").find(".selectBox-hover").removeClass("selectBox-hover");d.addClass("selectBox-hover")},p=function(a,d){a=c(a);c(d);var b=a.data("selectBox-control");b!==void 0&&b.data("selectBox-options").find(".selectBox-hover").removeClass("selectBox-hover")},l=function(a,d,b){if(d&&d.length!==0){var a=c(a),a=a.data("selectBox-control"),e=a.data("selectBox-options"),a=a.hasClass("selectBox-dropdown")?
 e:e.parent(),e=parseInt(d.offset().top-a.position().top),f=parseInt(e+d.outerHeight());b?a.scrollTop(d.offset().top-a.offset().top+a.scrollTop()-a.height()/2):(e<0&&a.scrollTop(d.offset().top-a.offset().top+a.scrollTop()),f>a.height()&&a.scrollTop(d.offset().top+d.outerHeight()-a.offset().top+a.scrollTop()-a.height()))}},t=function(a,d){var a=c(a),b=a.data("selectBox-control"),e=b.data("selectBox-options"),f=0,g=0;if(!b.hasClass("selectBox-disabled"))switch(d.keyCode){case 8:d.preventDefault();j=
 "";break;case 9:case 27:h();p(a);break;case 13:b.hasClass("selectBox-menuShowing")?(q(a,e.find("LI.selectBox-hover:first"),d),b.hasClass("selectBox-dropdown")&&h()):k(a);break;case 38:case 37:d.preventDefault();if(b.hasClass("selectBox-menuShowing")){b=e.find(".selectBox-hover").prev("LI");f=e.find("LI:not(.selectBox-optgroup)").length;for(g=0;b.length===0||b.hasClass("selectBox-disabled")||b.hasClass("selectBox-optgroup");)if(b=b.prev("LI"),b.length===0&&(b=e.find("LI:last")),++g>=f)break;i(a,b);
 l(a,b)}else k(a);break;case 40:case 39:if(d.preventDefault(),b.hasClass("selectBox-menuShowing")){b=e.find(".selectBox-hover").next("LI");f=e.find("LI:not(.selectBox-optgroup)").length;for(g=0;b.length===0||b.hasClass("selectBox-disabled")||b.hasClass("selectBox-optgroup");)if(b=b.next("LI"),b.length===0&&(b=e.find("LI:first")),++g>=f)break;i(a,b);l(a,b)}else k(a)}},u=function(a,d){var a=c(a),b=a.data("selectBox-control"),e=b.data("selectBox-options");if(!b.hasClass("selectBox-disabled"))switch(d.keyCode){case 9:case 27:case 13:case 38:case 37:case 40:case 39:break;
 default:b.hasClass("selectBox-menuShowing")||k(a),d.preventDefault(),clearTimeout(s),j+=String.fromCharCode(d.charCode||d.keyCode),e.find("A").each(function(){if(c(this).text().substr(0,j.length).toLowerCase()===j.toLowerCase())return i(a,c(this).parent()),l(a,c(this).parent()),!1}),s=setTimeout(function(){j=""},1E3)}},w=function(a,d){a=c(a);a.val(d);var d=a.val(),b=a.data("selectBox-control");if(b){var e=a.data("selectBox-settings"),f=b.data("selectBox-options");b.find(".selectBox-label").text(c(a).find("OPTION:selected").text()||
 "\u00a0");f.find(".selectBox-selected").removeClass("selectBox-selected");f.find("A").each(function(){if(typeof d==="object")for(var a=0;a<d.length;a++)c(this).attr("rel")==d[a]&&c(this).parent().addClass("selectBox-selected");else c(this).attr("rel")==d&&c(this).parent().addClass("selectBox-selected")});e.change&&e.change.call(a)}},o=function(a){c(a).css("MozUserSelect","none").bind("selectstart",function(a){a.preventDefault()})};switch(r){case "control":return c(this).data("selectBox-control");
 case "settings":if(!f)return c(this).data("selectBox-settings");c(this).each(function(){c(this).data("selectBox-settings",c.extend(!0,c(this).data("selectBox-settings"),f))});break;case "options":c(this).each(function(){var a,d=f;a=c(this);var b=a.data("selectBox-control");a.data("selectBox-settings");switch(typeof f){case "string":a.html(f);break;case "object":a.html("");for(var e in f)if(f[e]!==null){if(typeof f[e]==="object"){var d=c('<optgroup label="'+e+'" />'),h;for(h in f[e])d.append('<option value="'+
 h+'">'+f[e][h]+"</option>")}else d=c('<option value="'+e+'">'+f[e]+"</option>");a.append(d)}}if(b)switch(b.data("selectBox-options").remove(),e=b.hasClass("selectBox-dropdown")?"dropdown":"inline",d=n(a,e),b.data("selectBox-options",d),e){case "inline":b.append(d);break;case "dropdown":b.find(".selectBox-label").text(c(a).find("OPTION:selected").text()||"\u00a0"),c("BODY").append(d)}});break;case "value":if(!f)return c(this).val();c(this).each(function(){w(this,f)});break;case "enable":c(this).each(function(){var a;
 a=c(this);a.attr("disabled",!1);(a=a.data("selectBox-control"))&&a.removeClass("selectBox-disabled")});break;case "disable":c(this).each(function(){var a;a=c(this);a.attr("disabled",!0);(a=a.data("selectBox-control"))&&a.addClass("selectBox-disabled")});break;case "destroy":c(this).each(function(){var a;a=c(this);var d=a.data("selectBox-control");d&&(d.data("selectBox-options").remove(),d.remove(),a.removeClass("selectBox").removeData("selectBox-control").removeData("selectBox-settings").show())});
 break;default:c(this).each(function(){v(this,r)})}return c(this)}})}(jQuery);